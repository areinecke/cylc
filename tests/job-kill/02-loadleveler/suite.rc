#!Jinja2
[cylc]
   [[reference test]]
       required run mode=live
       expected task failures = t1.1
       live mode suite timeout=5 # minutes
[scheduling]
    [[dependencies]]
        graph=t1:start=>stop
[runtime]
    [[t1]]
        command scripting=sleep 120
{% if "CYLC_TEST_HOST" in environ and environ["CYLC_TEST_HOST"] %}
        [[[remote]]]
            host={{environ["CYLC_TEST_HOST"]}}
{% endif %}
        [[[job submission]]]
            method=loadleveler
        [[[directives]]]
            class=serial
            job_type=serial
            notification=never
            resources=ConsumableCpus(1) ConsumableMemory(64mb)
            wall_clock_limit=180,120
{% if "CYLC_TEST_DIRECTIVES" in environ and environ["CYLC_TEST_DIRECTIVES"] %}
            {{environ["CYLC_TEST_DIRECTIVES"]}}
{% endif %}
    [[stop]]
        command scripting="""
cylc kill $CYLC_SUITE_REG_NAME t1 1 || true
cylc stop $CYLC_SUITE_REG_NAME
"""
